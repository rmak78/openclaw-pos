<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OpenClaw POS — Till Demo</title>
  <style>
    :root{--bg:#0b1020;--panel:#111933;--muted:#9fb0d1;--text:#eaf0ff;--brand:#4cc9f0;--ok:#22c55e;--warn:#f59e0b;--line:#2b3a63}
    *{box-sizing:border-box} body{margin:0;background:linear-gradient(180deg,#0a1020,#0d1428);color:var(--text);font-family:Inter,system-ui,Arial}
    .wrap{max-width:1280px;margin:0 auto;padding:16px}
    .top{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:12px}
    .badge{background:#0f1a36;border:1px solid var(--line);padding:6px 10px;border-radius:999px;color:#c8d4f2;font-size:12px}
    .grid{display:grid;grid-template-columns:2fr 1fr;gap:12px}
    .panel{background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:12px}
    .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:10px;max-height:72vh;overflow:auto;padding-right:4px}
    .card{background:#0d1630;border:1px solid #27365e;border-radius:12px;padding:10px;cursor:pointer}
    .card:hover{border-color:var(--brand)}
    .name{font-weight:700;font-size:14px}.price{color:#95ffd0;font-weight:700}
    input,select,button{font:inherit}
    .search{width:100%;padding:10px;border-radius:10px;border:1px solid var(--line);background:#0b142c;color:var(--text);margin-bottom:10px}
    .cart-list{max-height:40vh;overflow:auto}
    .row{display:grid;grid-template-columns:1fr auto auto auto;gap:8px;align-items:center;padding:8px 0;border-bottom:1px dashed #263459}
    .qty{display:flex;align-items:center;gap:6px}.qty button{width:26px;height:26px;border-radius:8px;border:1px solid var(--line);background:#172447;color:#fff}
    .btn{padding:10px 12px;border-radius:10px;border:1px solid var(--line);background:#172447;color:#fff;cursor:pointer}
    .btn.primary{background:linear-gradient(90deg,#06b6d4,#3b82f6);border:none;font-weight:700}
    .totals{margin-top:10px;font-size:14px}.totals div{display:flex;justify-content:space-between;padding:4px 0}
    .grand{font-size:18px;font-weight:800;color:#95ffd0}
    .actions{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:10px}
    .receipt{white-space:pre-wrap;background:#0a1329;border:1px solid #22335c;border-radius:10px;padding:10px;font-size:12px;max-height:180px;overflow:auto;margin-top:10px}
    @media(max-width:980px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
<div class="wrap">
  <div class="top">
    <h2 style="margin:0">Till Demo — Fully Functional Checkout Flow</h2>
    <div style="display:flex;gap:8px;flex-wrap:wrap">
      <span class="badge">Branch: KHI-01</span><span class="badge">Till: T1</span><span class="badge" id="clock"></span>
    </div>
  </div>

  <div class="grid">
    <section class="panel">
      <input id="search" class="search" placeholder="Search product by name / SKU" />
      <div class="products" id="products"></div>
    </section>

    <aside class="panel">
      <h3 style="margin:4px 0 8px">Cart</h3>
      <div class="cart-list" id="cartList"></div>
      <div class="totals">
        <div><span>Subtotal</span><b id="subtotal">0</b></div>
        <div><span>Tax (18%)</span><b id="tax">0</b></div>
        <div><span>Discount</span><b id="discount">0</b></div>
        <div class="grand"><span>Total</span><span id="total">0</span></div>
      </div>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:10px">
        <input id="discountInput" class="search" style="margin:0" type="number" min="0" value="0" placeholder="Discount" />
        <select id="payment" class="search" style="margin:0"><option>Cash</option><option>Card</option><option>JazzCash</option><option>Bank Transfer</option></select>
      </div>

      <div class="actions">
        <button class="btn" id="clear">Clear</button>
        <button class="btn primary" id="checkout">Complete Sale</button>
      </div>

      <div id="receipt" class="receipt" style="display:none"></div>
    </aside>
  </div>
</div>
<script>
const inventory=[
  ['TEA-001','Karak Chai',120],['COF-002','Latte',280],['BRG-003','Chicken Burger',540],['FRY-004','Fries',250],['WTR-005','Mineral Water',90],
  ['RIC-006','Chicken Biryani',460],['SND-007','Club Sandwich',420],['JUC-008','Fresh Orange Juice',300],['CKE-009','Chocolate Cake Slice',360],['ICE-010','Vanilla Ice Cream',220],
  ['PIZ-011','Small Pizza',890],['SOU-012','Chicken Soup',330],['SAL-013','Caesar Salad',410],['BBQ-014','BBQ Wings',520],['TCK-015','Tikka Wrap',490]
].map(([sku,name,price])=>({sku,name,price}));
let cart={};
const fmt=n=>`PKR ${n.toLocaleString()}`;
const q=(id)=>document.getElementById(id);
function now(){const d=new Date();q('clock').textContent=d.toLocaleTimeString()} setInterval(now,1000); now();

function renderProducts(){
  const term=q('search').value.toLowerCase().trim();
  q('products').innerHTML=inventory.filter(p=>!term||p.name.toLowerCase().includes(term)||p.sku.toLowerCase().includes(term)).map(p=>`
    <div class='card' data-sku='${p.sku}'>
      <div class='name'>${p.name}</div>
      <div style='font-size:12px;color:#9fb0d1'>${p.sku}</div>
      <div class='price'>${fmt(p.price)}</div>
    </div>`).join('');
  q('products').querySelectorAll('.card').forEach(c=>c.onclick=()=>add(c.dataset.sku));
}

function add(sku){cart[sku]=(cart[sku]||0)+1;renderCart()}
function dec(sku){if(!cart[sku])return;cart[sku]--;if(cart[sku]<=0)delete cart[sku];renderCart()}
function inc(sku){cart[sku]=(cart[sku]||0)+1;renderCart()}

function renderCart(){
  const items=Object.entries(cart).map(([sku,qty])=>({item:inventory.find(p=>p.sku===sku),qty}));
  q('cartList').innerHTML=items.length?items.map(({item,qty})=>`<div class='row'><div><b>${item.name}</b><div style='font-size:12px;color:#9fb0d1'>${item.sku}</div></div><div class='qty'><button onclick="dec('${item.sku}')">-</button><b>${qty}</b><button onclick="inc('${item.sku}')">+</button></div><div>${fmt(item.price)}</div><div><b>${fmt(item.price*qty)}</b></div></div>`).join(''):'<div style="color:#9fb0d1">No items yet.</div>';
  const subtotal=items.reduce((s,{item,qty})=>s+item.price*qty,0);
  const discount=Math.max(0,Number(q('discountInput').value||0));
  const tax=Math.round(subtotal*0.18);
  const total=Math.max(0,subtotal+tax-discount);
  q('subtotal').textContent=fmt(subtotal); q('tax').textContent=fmt(tax); q('discount').textContent=fmt(discount); q('total').textContent=fmt(total);
}

q('search').addEventListener('input',renderProducts);
q('discountInput').addEventListener('input',renderCart);
q('clear').onclick=()=>{cart={};q('discountInput').value=0;q('receipt').style.display='none';renderCart();};
q('checkout').onclick=()=>{
  const items=Object.entries(cart); if(!items.length){alert('Add products first.'); return;}
  const id='RCP-'+Date.now().toString().slice(-8);
  const lines=items.map(([sku,qty])=>{const p=inventory.find(x=>x.sku===sku);return `${p.name} x${qty} = ${fmt(p.price*qty)}`;}).join('\n');
  const txt=`Receipt: ${id}\nTill: KHI-01-T1\nPayment: ${q('payment').value}\n\n${lines}\n\nSubtotal: ${q('subtotal').textContent}\nTax: ${q('tax').textContent}\nDiscount: ${q('discount').textContent}\nTOTAL: ${q('total').textContent}\n\nStatus: PAID`;
  q('receipt').textContent=txt; q('receipt').style.display='block';
};
window.dec=dec; window.inc=inc;
renderProducts(); renderCart();
</script>
</body>
</html>
